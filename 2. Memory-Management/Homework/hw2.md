# Домашнее задание к занятию "Память, управление памятью" - Александр Дружбин

### Задание 1

Что происходит с оперативной памятью во время перехода ПК в:
1) сон (suspend)
2) гибернацию (hibernate)

### Решение

1) во время перехода в режим сна компьютер переводит оперативную память в состояние минимального энергопотребления, достаточного для сохранения данных, т.е. всё что было в RAM остаётся в нём и подача 'электроэнергии во время сна не прекращается
2) во время перехода в гибернацию RAM сбрасывается на диск, а сам компьютер полностью выключается (включая жесткий диск): после сохранения RAM подача электроэнергии полностью прекращается; После включения питания компьютера содержимое памяти загружается обратно с диска в память, и пользователь сможет продолжить работу с того же места, на котором он остановился, так как все запущенные ранее программы продолжат выполняться

---

### Задание 2

В лекции не была упомянута одна известная команда для получения информации о нагрузке на компьютер и в частности  на ОЗУ.

Ее вывод выглядит примерно вот так:

<a href="https://imgbb.com/"><img src="https://i.ibb.co/7Q16Chb/2020-12-07-16-52-37.png" alt="2020-12-07-16-52-37" border="0"></a>

*Как называется эта команда? Что такое si и so  в примере на картинке? *

### Решение

Утилита `vmstat`
* si (swap in) — блоков в секунду считываемых из swap в память
* so (swap out) — блоков в секунду перемещаемых из памяти в swap

---

### Задание 3 + Решение

Приведите 3 команды, которые выведут на экран следующее::

1) Архитектуру ПК = `lscpu|grep Architecture`
2) Модель процессора = `lscpu|grep Model`
3) Количество памяти, которая уже не используется процессами, но еще остается в памяти(ключевое слово - inactive). = `vmstat -s|grep inactive`

---

### Задание 4

1) Создайте скрин вывода команды `free -h -t`
2) Создайте swap-файл размером 1Гб
3) Добавьте настройку чтобы swap-файл подключался автоматически при перезагрузке виртуальной машины (подсказка: необходимо внести изменения в файл `/etc/fstab`)
4) Создайте скрин вывода команды `free -h -t`
5) Создайте скрин вывода команды `swapon -s`
6) Измените процент свободной оперативной памяти, при котором начинает использоваться раздел подкачки до 30%. Сделайте скрин внесенного изменения.


### Решение

1. [скрин вывода команды free -h -t](http://screenshot.alarislabs.com/ADr/image_20240212082513_a008d4de.png)
2. [скрин вывода команды free -h -t после создания swap-файла](http://screenshot.alarislabs.com/ADr/image_20240212090055_2bd9dd5f.png)
3. [cкрин вывода команды swapon -s после создания swap-файла](http://screenshot.alarislabs.com/ADr/image_20240212090139_c3e0c255.png)
4. [скрин текущего значения swappiness](http://screenshot.alarislabs.com/ADr/image_20240212090511_12468de3.png) (в /etc/sysctl.conf оставил как было, но помню, что в случае чего там тоже нужно менять, чтобы сохранилось после ребута)

---

### Задание 5

Распишите, чем отличается физическая память от виртуальной. Какими программами можно её посмотреть? Как можно понять сколько виртуальной памяти потребляется процессом, а сколько физической?

### Решение

Виртуальная память - это абстрактная сущность, которую создаёт ОС для работы программ с ней. В виртуальную память входит сама RAM и все SWAP разделы, т.е. как физическая память, так и дисковая память, поэтому виртуальной памяти всегда больше, чем RAM. Другими словами, RAM находится на физическом уровне, а виртуальная память - на логическом.

Для просмотра запрошенной процессом виртуальной памяти и потребляемой им RAM используется команда `top`(*VIRT* - сколько виртуальной памяти запрошено vs *RES* - сколько физической используется), ещё память смотрят по `vmstat`, также физическую память удобно смотреть по `free -h`.



